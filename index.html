<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qu·∫£n l√Ω CLB Th·ªÉ thao</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #f8f9fb; color: #333; }
    header { background: #2a9d8f; color: white; padding: 10px 20px; text-align: center; font-size: 22px; font-weight: 600; }
    nav { display: flex; background: #264653; color: white; justify-content: space-around; }
    nav button { flex: 1; padding: 10px; border: none; background: #264653; color: white; cursor: pointer; transition: background 0.3s; }
    nav button.active, nav button:hover { background: #2a9d8f; }
    .content { padding: 20px; }
    .tab { display: none; animation: fadeIn 0.3s; }
    .tab.active { display: block; }
    @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 8px 12px; border-bottom: 1px solid #ccc; text-align: left; }
    th { background: #2a9d8f; color: white; }
    .add-btn { background: #e9c46a; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; margin-top: 8px; }
  </style>
</head>
<body>
  <header>üè∏ Qu·∫£n l√Ω C√¢u l·∫°c b·ªô Th·ªÉ thao</header>
  <nav>
    <button class="active" onclick="switchTab('members')">Th√†nh vi√™n</button>
    <button onclick="switchTab('schedule')">L·ªãch t·∫≠p</button>
    <button onclick="switchTab('tournament')">Gi·∫£i ƒë·∫•u</button>
    <button onclick="switchTab('finance')">T√†i ch√≠nh</button>
  </nav>

  <div class="content">
    <div id="members" class="tab active">
      <h2>Danh s√°ch th√†nh vi√™n</h2>
      <table id="membersTable"></table>
    </div>

    <div id="schedule" class="tab">
      <h2>L·ªãch t·∫≠p</h2>
      <table id="scheduleTable"></table>
    </div>

    <div id="tournament" class="tab">
      <h2>Gi·∫£i ƒë·∫•u</h2>
      <table id="tournamentTable"></table>
    </div>

    <div id="finance" class="tab">
      <h2>T√†i ch√≠nh</h2>
      <table id="financeTable"></table>
      <p><b>T·ªïng qu·ªπ hi·ªán t·∫°i:</b> <span id="balance"></span>ƒë</p>
    </div>
  </div>

  <script>
    function switchTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      event.target.classList.add('active');
    }

    async function loadData() {
      try {
        const res = await fetch('data/db.json');
        const data = await res.json();
        renderMembers(data.members);
        renderSchedule(data.schedule);
        renderTournaments(data.tournaments);
        renderFinance(data.finance);
      } catch (e) {
        console.error("L·ªói t·∫£i d·ªØ li·ªáu:", e);
        document.querySelector('.content').innerHTML = "<p style='color:red;'>Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ db.json</p>";
      }
    }

    function renderMembers(members) {
      const table = document.getElementById('membersTable');
      table.innerHTML = "<tr><th>T√™n</th><th>Vai tr√≤</th><th>Tham gia t·ª´</th></tr>" +
        members.map(m => `<tr><td>${m.name}</td><td>${m.role}</td><td>${m.joined}</td></tr>`).join('');
    }

    function renderSchedule(list) {
      const table = document.getElementById('scheduleTable');
      table.innerHTML = "<tr><th>Ng√†y</th><th>Gi·ªù</th><th>ƒê·ªãa ƒëi·ªÉm</th></tr>" +
        list.map(i => `<tr><td>${i.day}</td><td>${i.time}</td><td>${i.location}</td></tr>`).join('');
    }

    function renderTournaments(list) {
      const table = document.getElementById('tournamentTable');
      table.innerHTML = "<tr><th>T√™n gi·∫£i</th><th>Ng√†y t·ªï ch·ª©c</th><th>Tr·∫°ng th√°i</th></tr>" +
        list.map(t => `<tr><td>${t.name}</td><td>${t.date}</td><td>${t.status}</td></tr>`).join('');
    }

    function renderFinance(finance) {
      const table = document.getElementById('financeTable');
      table.innerHTML = "<tr><th>Lo·∫°i</th><th>S·ªë ti·ªÅn</th><th>Ng√†y</th></tr>" +
        finance.records.map(r => `<tr><td>${r.type}</td><td>${r.amount.toLocaleString()}</td><td>${r.date}</td></tr>`).join('');
      document.getElementById('balance').innerText = finance.balance.toLocaleString();
    }

    loadData();
  </script>
</body>
</html>
