<!DOCTYPE html>
<html lang="vi">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quy Tr√¨nh Thi·∫øt L·∫≠p D·ª± √Ån M·∫´u (GitHub + Vercel + Google)</title>
    <!-- T·∫£i Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        pre {
            background-color: #1f2937; /* Gray-800 */
            color: #f9fafb; /* White */
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-size: 0.875rem; /* text-sm */
            margin-top: 0.5rem;
        }
        /* ƒê·∫£m b·∫£o c√°c slide kh√¥ng b·ªã co l·∫°i khi hi·ªÉn th·ªã ngang h√†ng */
        .slide-item {
            flex: 0 0 100%; /* Kh√¥ng co l·∫°i, chi·∫øm ƒë√∫ng 100% chi·ªÅu r·ªông container */
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        <header class="text-center mb-8 bg-white p-6 rounded-xl shadow-lg">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
                H√†nh Tr√¨nh Tri·ªÉn Khai App Hi·ªán ƒê·∫°i
            </h1>
            <p class="text-xl text-indigo-600 font-semibold">
                GitHub ‚ûî Vercel ‚ûî Google (Firebase)
            </p>
            <p class="text-sm text-gray-500 mt-2">
                Ho√†n th√†nh c√°c b∆∞·ªõc d∆∞·ªõi ƒë√¢y. Ti·∫øn tr√¨nh v√† d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u t·ª± ƒë·ªông tr√™n tr√¨nh duy·ªát n√†y.
            </p>
        </header>

        <div id="project-data-display" class="mb-8 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-sm text-gray-700 rounded-lg hidden">
            <p class="font-bold mb-1 text-yellow-700">D·ªØ li·ªáu D·ª± √°n ƒê√£ Ghi nh·∫≠n:</p>
            <ul id="data-list" class="list-disc list-inside space-y-0.5">
                <!-- Data will be inserted here -->
            </ul>
        </div>

        <!-- Carousel / Slideshow Structure -->
        <div id="carousel-wrapper" class="relative">
            <!-- Slide Window: Gi·ªØ n·ªôi dung tr∆∞·ª£t ngang -->
            <div id="slides-window" class="overflow-hidden rounded-2xl shadow-2xl bg-white">
                <div id="slides-wrapper" class="flex transition-transform duration-500 ease-in-out">
                    <!-- Steps/Phases will be rendered here as slides -->
                </div>
            </div>

            <!-- Navigation Controls -->
            <div class="flex justify-between mt-4">
                <button id="prev-btn" onclick="navigateSlides(-1)" 
                        class="px-6 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 transition duration-150 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed">
                    &larr; Phase Tr∆∞·ªõc
                </button>
                <div id="phase-counter" class="text-lg font-bold text-indigo-600 self-center"></div>
                <button id="next-btn" onclick="navigateSlides(1)" 
                        class="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-150 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed">
                    Phase Ti·∫øp &rarr;
                </button>
            </div>
        </div>
        <!-- End Carousel Structure -->

        <footer class="text-center mt-10 text-gray-500 text-xs">
            Phi√™n b·∫£n h∆∞·ªõng d·∫´n: M·∫´u App Next.js/React.
        </footer>
    </div>

    <script>
        // Khai b√°o bi·∫øn to√†n c·ª•c ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu d·ª± √°n
        let projectData = {};
        const PROJECT_DATA_KEY = 'project_setup_data';
        const TASK_STATE_KEY = 'project_setup_task_state';
        let currentPhaseIndex = 0; // State m·ªõi: Theo d√µi slide/phase hi·ªán t·∫°i

        // D·ªØ li·ªáu c√°c b∆∞·ªõc h∆∞·ªõng d·∫´n
        const stepsData = [
            {
                id: 'accounts',
                title: 'Phase 1: Chu·∫©n b·ªã T√†i kho·∫£n C∆° b·∫£n',
                color: 'bg-indigo-500',
                tasks: [
                    // ƒê√£ th√™m input ƒë·ªÉ ghi nh·∫≠n t√™n t√†i kho·∫£n
                    { id: 't1_github', text: 'T·∫°o t√†i kho·∫£n GitHub (ho·∫∑c ƒëƒÉng nh·∫≠p).', isInputRequired: true, inputId: 'githubUsername', inputPlaceholder: 'Nh·∫≠p T√™n ng∆∞·ªùi d√πng GitHub c·ªßa b·∫°n' },
                    { id: 't2_vercel', text: 'T·∫°o t√†i kho·∫£n Vercel (n√™n ƒëƒÉng k√Ω b·∫±ng GitHub).', isInputRequired: true, inputId: 'vercelUsername', inputPlaceholder: 'Nh·∫≠p T√™n team/ng∆∞·ªùi d√πng Vercel' },
                    { id: 't3_google_acc', text: 'ƒê·∫£m b·∫£o c√≥ t√†i kho·∫£n Google ƒë·ªÉ d√πng Firebase.', isInputRequired: true, inputId: 'googleEmail', inputPlaceholder: 'Nh·∫≠p Email Google/Firebase' }
                ]
            },
            {
                id: 'github_setup',
                title: 'Phase 2: Thi·∫øt l·∫≠p D·ª± √°n v√† GitHub',
                color: 'bg-gray-700',
                tasks: [
                    { id: 't4_local_project', text: 'Kh·ªüi t·∫°o d·ª± √°n Next.js/React (v√≠ d·ª•: npx create-next-app@latest).', isInputRequired: true, inputId: 'projectName', inputPlaceholder: 'Nh·∫≠p T√™n D·ª± √°n (v√≠ d·ª•: sport-manager)' },
                    { id: 't5_git_init', text: 'Kh·ªüi t·∫°o Git trong th∆∞ m·ª•c d·ª± √°n (git init).' },
                    { id: 't6_first_commit', text: 'Th√™m v√† commit code l·∫ßn ƒë·∫ßu (git add . && git commit -m "initial commit").' },
                    { id: 't7_github_repo', text: 'T·∫°o m·ªôt Repository m·ªõi tr√™n GitHub.', isInputRequired: true, inputId: 'githubRepoUrl', inputPlaceholder: 'D√°n URL Repo GitHub (v√≠ d·ª•: https://github.com/user/project)' },
                    { id: 't8_push', text: 'Li√™n k·∫øt v√† ƒë·∫©y code l√™n GitHub (git remote add origin... && git push...).' }
                ]
            },
            {
                id: 'google_firebase',
                title: 'Phase 3: T√≠ch h·ª£p D·ªãch v·ª• Google (Firebase)',
                color: 'bg-yellow-600',
                tasks: [
                    { id: 't9_firebase_project', text: 'T·∫°o m·ªôt d·ª± √°n m·ªõi trong Firebase Console (ƒë·∫∑t t√™n: ' + (projectData.projectName || 'T√™n D·ª± √°n c·ªßa b·∫°n') + ').' },
                    { id: 't10_web_app', text: 'Th√™m m·ªôt "Web app" v√†o d·ª± √°n Firebase v√† sao ch√©p c·∫•u h√¨nh (firebaseConfig).', isInputRequired: true, inputId: 'firebaseApiKey', inputPlaceholder: 'D√°n Firebase API Key (ƒë·ªÉ d√πng trong .env)' },
                    { id: 't11_install_sdk', text: 'C√†i ƒë·∫∑t Firebase SDK v√†o d·ª± √°n local (npm install firebase).' },
                    { id: 't12_init_firebase', text: 'T·∫°o t·ªáp c·∫•u h√¨nh ƒë·ªÉ kh·ªüi t·∫°o Firebase trong code (s·ª≠ d·ª•ng API Key ƒë√£ l∆∞u).', codeSnippet: 
`// file: firebase-init.js (ho·∫∑c .ts)
import { initializeApp } from "firebase/app";
// L·∫•y c√°c bi·∫øn t·ª´ m√¥i tr∆∞·ªùng (Next.js/React)
const firebaseConfig = {
    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY, // S·ª≠ d·ª•ng Key ƒë√£ l∆∞u
    authDomain: "..."
    // ...
};
export const app = initializeApp(firebaseConfig);
` 
                    },
                    { id: 't13_auth', text: 'Trong Firebase: B·∫≠t ph∆∞∆°ng th·ª©c ƒëƒÉng nh·∫≠p Google (Authentication -> Sign-in method).' },
                    { id: 't14_env_local', text: 'T·∫°o t·ªáp .env.local v√† th√™m c√°c bi·∫øn m√¥i tr∆∞·ªùng Firebase.', codeSnippet: 
`# file: .env.local
NEXT_PUBLIC_FIREBASE_API_KEY="[KEY_D√ÅN_T·∫†I_ƒê√ÇY]"
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN="..."
# KH√îNG BAO G·ªíM T·ªÜP N√ÄY KHI COMMIT L√äN GITHUB!`
                    }
                ]
            },
            {
                id: 'database_schema',
                title: 'Phase 4: C·∫•u tr√∫c Database (Firestore) & Code M·∫´u (App H·ªôi thao)',
                color: 'bg-green-600',
                tasks: [
                    { id: 't15_firestore_db', text: 'T·∫°o c∆° s·ªü d·ªØ li·ªáu Firestore trong Firebase Console (ch·ªçn mode "Production").' },
                    { id: 't16_security_rules', text: 'Thi·∫øt l·∫≠p Security Rules (ch·∫•p nh·∫≠n read/write cho ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p).', codeSnippet: 
`// V√≠ d·ª• v·ªÅ Firestore Rules (C·∫¶N T√ôY CH·ªàNH THEO B·∫¢O M·∫¨T)
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Ch·ªâ cho ph√©p ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p ƒë·ªçc/ghi
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}`
                    },
                    { 
                        id: 't17_data_model', 
                        text: 'Thi·∫øt l·∫≠p m√¥ h√¨nh d·ªØ li·ªáu c∆° b·∫£n cho App H·ªôi Thao (Collections: Events, Teams, Athletes).',
                        codeSnippet: 
`// M√¥ h√¨nh d·ªØ li·ªáu App H·ªôi Thao:
// 1. Collection: events (S·ª± ki·ªán)
//    - Document: event_id_1
//      - name: "Gi·∫£i b√≥ng ƒë√° m√πa xu√¢n 2026"
//      - date: "2026-03-01"
//      - status: "Active"
//
// 2. Collection: teams (ƒê·ªôi)
//    - Document: team_id_A
//      - name: "ƒê·ªôi K·ªπ thu·∫≠t"
//      - eventId: event_id_1
//
// 3. Collection: athletes (V·∫≠n ƒë·ªông vi√™n)
//    - Document: athlete_id_X
//      - name: "Nguy·ªÖn VƒÉn A"
//      - teamId: team_id_A
//      - score: 0
// `
                    },
                    { id: 't18_fetch_code', text: 'Vi·∫øt m√£ m·∫´u ƒë·ªÉ fetch d·ªØ li·ªáu Events t·ª´ Firestore.', codeSnippet: 
`// V√≠ d·ª• Code JavaScript/React ƒë·ªÉ ƒë·ªçc d·ªØ li·ªáu (c·∫ßn import db t·ª´ firebase-init.js)
import { collection, getDocs } from "firebase/firestore";
import { db } from "./firebase-init"; // Gi·∫£ s·ª≠ ƒë√£ import

async function getEvents() {
  const eventsCol = collection(db, 'events');
  const eventSnapshot = await getDocs(eventsCol);
  const eventList = eventSnapshot.docs.map(doc => ({ 
    id: doc.id, 
    ...doc.data() 
  }));
  console.log(eventList);
  return eventList;
}`
                    }
                ]
            },
            {
                id: 'vercel_deploy',
                title: 'Phase 5: Tri·ªÉn khai T·ª± ƒë·ªông v·ªõi Vercel',
                color: 'bg-black',
                tasks: [
                    { id: 't19_vercel_import', text: 'ƒêƒÉng nh·∫≠p Vercel v√† ch·ªçn "Add New Project", sau ƒë√≥ Import Repository t·ª´ GitHub (' + (projectData.githubRepoUrl || 'URL Repo ƒë√£ l∆∞u') + ').', isInputRequired: true, inputId: 'vercelProjectUrl', inputPlaceholder: 'D√°n URL Project Vercel (v√≠ d·ª•: https://my-app.vercel.app)' },
                    { id: 't20_env_vercel', text: 'Quan tr·ªçng: D√°n t·∫•t c·∫£ c√°c bi·∫øn m√¥i tr∆∞·ªùng (NEXT_PUBLIC_...) v√†o C·∫•u h√¨nh Bi·∫øn m√¥i tr∆∞·ªùng tr√™n Vercel.' },
                    { id: 't21_deploy_first', text: 'Nh·∫•n Deploy v√† ch·ªù ƒë·ª£i l·∫ßn tri·ªÉn khai ƒë·∫ßu ti√™n th√†nh c√¥ng.' },
                    { id: 't22_test_cd', text: 'Ki·ªÉm tra Continuous Deployment: Th·ª±c hi·ªán m·ªôt thay ƒë·ªïi nh·ªè, commit v√† push l√™n GitHub. Xem Vercel t·ª± ƒë·ªông build v√† deploy l·∫°i.' }
                ]
            },
        ];

        // --- Logic l∆∞u tr·ªØ v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i ---

        // T·∫£i d·ªØ li·ªáu D·ª± √°n v√† Tr·∫°ng th√°i nhi·ªám v·ª•
        function loadState() {
            try {
                const data = localStorage.getItem(PROJECT_DATA_KEY);
                projectData = data ? JSON.parse(data) : {};
            } catch (e) {
                console.error("Error loading project data:", e);
                projectData = {};
            }
        }
        
        // L∆∞u d·ªØ li·ªáu D·ª± √°n
        function saveProjectData() {
            localStorage.setItem(PROJECT_DATA_KEY, JSON.stringify(projectData));
            updateProjectDataDisplay();
        }

        // L∆∞u tr·∫°ng th√°i nhi·ªám v·ª•
        function saveTaskState(taskId, state) {
            let taskStates = JSON.parse(localStorage.getItem(TASK_STATE_KEY) || '{}');
            taskStates[taskId] = state ? 'completed' : 'pending';
            localStorage.setItem(TASK_STATE_KEY, JSON.stringify(taskStates));
        }

        // T·∫£i tr·∫°ng th√°i nhi·ªám v·ª•
        function loadTaskState(taskId) {
            let taskStates = JSON.parse(localStorage.getItem(TASK_STATE_KEY) || '{}');
            return taskStates[taskId] === 'completed';
        }

        // C·∫≠p nh·∫≠t hi·ªÉn th·ªã d·ªØ li·ªáu ƒë√£ l∆∞u
        function updateProjectDataDisplay() {
            const dataList = document.getElementById('data-list');
            const dataDisplay = document.getElementById('project-data-display');
            dataList.innerHTML = '';
            let hasData = false;

            for (const [key, value] of Object.entries(projectData)) {
                if (value) {
                    const li = document.createElement('li');
                    // Hi·ªÉn th·ªã t√™n bi·∫øn th√¢n thi·ªán h∆°n
                    const displayKey = key.replace(/([A-Z])/g, ' $1').toUpperCase();
                    li.innerHTML = `<span class="font-medium">${displayKey}:</span> <code class="bg-yellow-200 px-1 rounded">${value}</code>`;
                    dataList.appendChild(li);
                    hasData = true;
                }
            }

            if (hasData) {
                dataDisplay.classList.remove('hidden');
            } else {
                dataDisplay.classList.add('hidden');
            }
        }
        
        // X·ª≠ l√Ω khi checkbox thay ƒë·ªïi ho·∫∑c input thay ƒë·ªïi
        function toggleTask(taskId) {
            const checkbox = document.getElementById(`check-${taskId}`);
            const label = document.querySelector(`label[for="check-${taskId}"]`);
            const isChecked = checkbox.checked;

            saveTaskState(taskId, isChecked);

            if (isChecked) {
                label.classList.add('line-through', 'text-gray-400');
                label.classList.remove('text-gray-700');
            } else {
                label.classList.remove('line-through', 'text-gray-400');
                label.classList.add('text-gray-700');
            }
            
            // C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh
            updateProgressBar();
        }

        function handleInput(inputId, value) {
            projectData[inputId] = value;
            saveProjectData();
            
            // Re-render only the current slide to show the new 'ƒê√£ ghi nh·∫≠n' badge and input style
            updateSlideContent(currentPhaseIndex); 
            
            // --- N∆†I ƒê·ªÇ TH·ª∞C HI·ªÜN KI·ªÇM TRA X√ÅC NH·∫¨N T√ÄI KHO·∫¢N TH·ª∞C T·∫æ ---
            // -----------------------------------------------------------------
        }

        // H√†m sao ch√©p code v√†o clipboard
        function copyCode(taskId, buttonElement) {
            const codeContainer = document.getElementById(`code-snippet-${taskId}`);
            if (!codeContainer) return;

            // D√πng m·ªôt textarea t·∫°m th·ªùi ƒë·ªÉ ch·ªçn v√† sao ch√©p n·ªôi dung
            const tempTextarea = document.createElement('textarea');
            // D√πng textContent.trim() ƒë·ªÉ l·∫•y code, b·ªè qua c√°c kho·∫£ng tr·∫Øng th·ª´a
            tempTextarea.value = codeContainer.textContent.trim(); 
            document.body.appendChild(tempTextarea);
            tempTextarea.select();

            let success = false;
            try {
                // Th·ª±c thi l·ªánh copy (ph∆∞∆°ng th·ª©c ƒë√°ng tin c·∫≠y trong m√¥i tr∆∞·ªùng iframe)
                success = document.execCommand('copy');
            } catch (err) {
                console.error('Copy failed:', err);
            }

            document.body.removeChild(tempTextarea);

            // C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t
            if (success) {
                const originalText = buttonElement.textContent;
                // L∆∞u l·∫°i c√°c class c·∫ßn ph·ª•c h·ªìi
                const originalClasses = Array.from(buttonElement.classList);

                // Hi·ªÉn th·ªã tr·∫°ng th√°i th√†nh c√¥ng
                buttonElement.textContent = 'ƒê√£ sao ch√©p!';
                buttonElement.classList.remove('bg-gray-600', 'hover:bg-gray-700');
                buttonElement.classList.add('bg-green-600');
                
                setTimeout(() => {
                    // Ph·ª•c h·ªìi tr·∫°ng th√°i ban ƒë·∫ßu
                    buttonElement.textContent = originalText;
                    buttonElement.className = originalClasses.join(' ');
                }, 2000);
            } else {
                // X·ª≠ l√Ω khi copy th·∫•t b·∫°i
                const originalText = buttonElement.textContent;
                buttonElement.textContent = 'L·ªói sao ch√©p!';
                buttonElement.classList.remove('bg-gray-600', 'hover:bg-gray-700');
                buttonElement.classList.add('bg-red-500');

                setTimeout(() => {
                    buttonElement.textContent = originalText;
                    buttonElement.classList.remove('bg-red-500');
                    buttonElement.classList.add('bg-gray-600', 'hover:bg-gray-700');
                }, 2000);
            }
        }


        // C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh t·ªïng th·ªÉ
        function updateProgressBar() {
            let completed = 0;
            // FIX: ƒê√£ s·ª≠a l·ªói c√∫ ph√°p 'missing )' trong ƒë·ªãnh nghƒ©a arrow function c·ªßa reduce
            const total = stepsData.reduce((count, section) => count + section.tasks.length, 0);

            stepsData.forEach(section => {
                section.tasks.forEach(task => {
                    if (loadTaskState(task.id)) {
                        completed++;
                    }
                });
            });

            renderProgressBar(completed, total);
        }

        // Render ho·∫∑c c·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh
        function renderProgressBar(completed, total) {
            let progressBar = document.getElementById('progress-bar-container');
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;

            if (!progressBar) {
                progressBar = document.createElement('div');
                progressBar.id = 'progress-bar-container';
                // ƒê·∫∑t progress bar ngay d∆∞·ªõi header
                progressBar.className = 'sticky top-0 z-10 p-4 bg-white shadow-xl rounded-b-2xl mb-8';
                
                const header = document.getElementById('app').querySelector('header');
                header.insertAdjacentElement('afterend', progressBar);
            }

            progressBar.innerHTML = `
                <div class="flex justify-between items-center mb-1">
                    <span class="text-sm font-semibold text-gray-700">Ti·∫øn ƒë·ªô Ho√†n th√†nh</span>
                    <span class="text-sm font-bold text-indigo-600">${completed} / ${total} (${percentage}%)</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div class="bg-indigo-600 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: ${percentage}%"></div>
                </div>
            `;
            
            // Th√™m hi·ªáu ·ª©ng ch√∫c m·ª´ng khi ho√†n th√†nh 100%
            if (percentage === 100) {
                progressBar.innerHTML += `
                    <div class="mt-2 text-center text-green-600 font-bold text-lg animate-pulse">
                        üéâ Ch√∫c m·ª´ng! D·ª± √°n c·ªßa b·∫°n ƒë√£ s·∫µn s√†ng Tri·ªÉn khai! üéâ
                    </div>
                `;
            }
        }
        
        // H√†m c·∫≠p nh·∫≠t v·ªã tr√≠ slide v√† tr·∫°ng th√°i n√∫t ƒëi·ªÅu h∆∞·ªõng
        function updateSlidePosition() {
            const slidesWrapper = document.getElementById('slides-wrapper');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const phaseCounter = document.getElementById('phase-counter');
            
            const totalPhases = getDynamicStepsData().length;
            
            // T√≠nh to√°n v·ªã tr√≠ tr∆∞·ª£t ngang
            slidesWrapper.style.transform = `translateX(-${currentPhaseIndex * 100}%)`;

            // C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t ƒëi·ªÅu h∆∞·ªõng
            prevBtn.disabled = (currentPhaseIndex === 0);
            nextBtn.disabled = (currentPhaseIndex === totalPhases - 1);
            
            // C·∫≠p nh·∫≠t b·ªô ƒë·∫øm Phase
            phaseCounter.textContent = `Phase ${currentPhaseIndex + 1} / ${totalPhases}`;
        }
        
        // H√†m ƒëi·ªÅu h∆∞·ªõng ƒë·∫øn m·ªôt Phase c·ª• th·ªÉ
        function goToPhase(index) {
            const totalPhases = getDynamicStepsData().length;
            if (index >= 0 && index < totalPhases) {
                currentPhaseIndex = index;
                updateSlidePosition();
                updateSlideContent(currentPhaseIndex); // T·∫£i l·∫°i n·ªôi dung ƒë·ªÉ c·∫≠p nh·∫≠t Breadcrumb
            }
        }

        // H√†m ƒëi·ªÅu h∆∞·ªõng slide (d√πng cho n√∫t b·∫•m)
        function navigateSlides(direction) {
            goToPhase(currentPhaseIndex + direction);
        }

        // H√†m c·∫≠p nh·∫≠t n·ªôi dung c·ªßa m·ªôt slide c·ª• th·ªÉ (sau khi input thay ƒë·ªïi)
        function updateSlideContent(phaseIndex) {
            const dynamicData = getDynamicStepsData();
            const section = dynamicData[phaseIndex];
            const slideElement = document.getElementById(`slide-${section.id}`);
            
            if (!slideElement) return;

            // X√≥a n·ªôi dung c≈©
            slideElement.innerHTML = ''; 

            // ==========================================================
            // 1. T·∫†O THANH BREADCRUMB (PROGRESS HEADER)
            // ==========================================================
            const breadcrumbContainer = document.createElement('div');
            // Class g·ªçn h∆°n, linh ho·∫°t h∆°n, d√πng flex-wrap ƒë·ªÉ xu·ªëng d√≤ng tr√™n mobile n·∫øu c·∫ßn
            breadcrumbContainer.className = 'flex flex-wrap items-center text-sm font-medium mb-6 p-3 bg-gray-100 rounded-xl shadow-inner border border-gray-200';
            
            dynamicData.forEach((phase, index) => {
                const isCurrent = index === phaseIndex;
                const isCompleted = index < phaseIndex;
                
                // Ch·ªâ hi·ªÉn th·ªã phase ƒë√£ ho√†n th√†nh v√† phase hi·ªán t·∫°i
                if (index > phaseIndex && !isCurrent) {
                    return; 
                }
                
                const span = document.createElement('span');
                span.className = `flex items-center whitespace-nowrap`;

                if (isCompleted) {
                    // Phase ƒë√£ qua: Text xanh, c√≥ th·ªÉ click ƒë·ªÉ quay l·∫°i
                    span.innerHTML = `
                        <button onclick="goToPhase(${index})" class="text-green-700 hover:text-green-900 transition duration-150 flex items-center font-semibold text-xs md:text-sm">
                            <svg class="w-4 h-4 mr-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                            ${index + 1}
                        </button>
                    `;
                } else if (isCurrent) {
                    // Phase hi·ªán t·∫°i: Text ƒë·∫≠m, m√†u t√≠m, highlight
                    span.innerHTML = `
                        <span class="text-indigo-600 font-extrabold text-sm md:text-base p-1 rounded-md bg-indigo-100">
                            ${index + 1}: ${phase.title}
                        </span>
                    `;
                }
                
                breadcrumbContainer.appendChild(span);

                // Th√™m d·∫•u ngƒÉn c√°ch (ch·ªâ cho c√°c m·ª•c ƒê√É HO√ÄN TH√ÄNH)
                if (isCompleted) {
                    const separator = document.createElement('span');
                    separator.className = 'mx-1.5 text-gray-400 font-light';
                    separator.textContent = '>';
                    breadcrumbContainer.appendChild(separator);
                }
            });

            slideElement.appendChild(breadcrumbContainer);

            // ==========================================================
            // 2. TI√äU ƒê·ªÄ V√Ä DANH S√ÅCH G·ªåN G√ÄNG H∆†N
            // ==========================================================
            
            // Ti√™u ƒë·ªÅ Section (Gi·∫£m k√≠ch th∆∞·ªõc text v√† padding)
            const titleElement = document.createElement('h2');
            titleElement.className = `${section.color} text-white text-lg font-bold p-2 rounded-lg mb-4`;
            titleElement.textContent = section.title;
            slideElement.appendChild(titleElement);

            // Danh s√°ch Tasks (Gi·∫£m kho·∫£ng c√°ch)
            const ul = document.createElement('ul');
            ul.className = 'space-y-3'; // Gi·∫£m t·ª´ space-y-4 -> space-y-3

            section.tasks.forEach(task => {
                const isChecked = loadTaskState(task.id);

                const li = document.createElement('li');
                // Gi·∫£m padding li v√† th√™m border m·ªèng ƒë·ªÉ ph√¢n t√°ch
                li.className = 'p-1.5 rounded-lg transition duration-150 hover:bg-gray-50 border-b border-gray-100 last:border-b-0'; 
                
                // Checkbox and Label
                const checkContainer = document.createElement('div');
                checkContainer.className = 'flex items-start';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `check-${task.id}`;
                checkbox.checked = isChecked;
                // Gi·∫£m k√≠ch th∆∞·ªõc checkbox
                checkbox.className = 'mt-1 mr-3 w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer flex-shrink-0';
                checkbox.addEventListener('change', () => toggleTask(task.id));

                const label = document.createElement('label');
                label.htmlFor = `check-${task.id}`;
                // Gi·∫£m text-base -> text-sm
                label.className = `flex-1 text-gray-700 font-medium text-sm leading-snug cursor-pointer ${isChecked ? 'line-through text-gray-400' : ''}`;
                label.innerHTML = task.text;

                checkContainer.appendChild(checkbox);
                checkContainer.appendChild(label);
                li.appendChild(checkContainer);

                // Input Field (if required)
                if (task.isInputRequired) {
                    const inputContainer = document.createElement('div');
                    // Gi·∫£m th·ª•t l·ªÅ t·ª´ ml-7 xu·ªëng ml-6
                    inputContainer.className = 'mt-1 ml-6 flex items-center space-x-3'; 
                    
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.id = `input-${task.inputId}`;
                    
                    const currentValue = projectData[task.inputId] || '';
                    input.value = currentValue;

                    input.placeholder = task.inputPlaceholder;
                    // Gi·∫£m padding/text size
                    input.className = `flex-grow px-2 py-1.5 border ${currentValue ? 'border-green-400' : 'border-indigo-300'} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-ring-indigo-500 focus:border-indigo-500 text-xs`;
                    
                    // --- ƒêI·ªÄU CH·ªàNH: Ch·ªâ l∆∞u v√† c·∫≠p nh·∫≠t khi Blur (Tab/Click away) ho·∫∑c Enter ---
                    
                    // 1. Event listener cho Blur (Tho√°t kh·ªèi √¥ nh·∫≠p li·ªáu)
                    input.addEventListener('blur', (e) => {
                        // G·ªçi h√†m handleInput ƒë·ªÉ l∆∞u d·ªØ li·ªáu v√† re-render slide
                        handleInput(task.inputId, e.target.value);
                    });

                    // 2. Event listener cho Keydown (Nh·∫•n Enter)
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault(); 
                            // Bu·ªôc √¥ nh·∫≠p li·ªáu m·∫•t focus (blur) ƒë·ªÉ k√≠ch ho·∫°t event 'blur' ·ªü tr√™n
                            e.target.blur(); 
                        }
                    });

                    // --- K·∫æT TH√öC ƒêI·ªÄU CH·ªàNH ---
                    
                    inputContainer.appendChild(input); 

                    // Status Badge (ƒê√£ ghi nh·∫≠n)
                    if (currentValue) {
                        const statusBadge = document.createElement('span');
                        statusBadge.className = 'flex-shrink-0 inline-flex items-center px-2 py-0.5 text-xs font-medium leading-none text-green-800 bg-green-200 rounded-full';
                        statusBadge.innerHTML = 'ƒê√£ ghi nh·∫≠n';
                        inputContainer.appendChild(statusBadge);
                    }
                    
                    li.appendChild(inputContainer);
                }

                // Code Snippet (if available)
                if (task.codeSnippet) {
                    const codeWrapper = document.createElement('div');
                    // Gi·∫£m th·ª•t l·ªÅ t·ª´ ml-7 xu·ªëng ml-6
                    codeWrapper.className = 'relative mt-2 ml-6'; 

                    // The actual code block (PRE)
                    const codePre = document.createElement('pre');
                    const code = document.createElement('code');
                    // Set an ID to reference the code content for copying
                    code.id = `code-snippet-${task.id}`; 
                    code.textContent = task.codeSnippet;
                    codePre.appendChild(code);

                    // Copy button
                    const copyButton = document.createElement('button');
                    copyButton.textContent = 'Sao ch√©p Code';
                    copyButton.className = 'absolute top-1 right-1 px-3 py-1 bg-gray-600 text-white text-xs font-semibold rounded-lg hover:bg-gray-700 transition duration-150';
                    copyButton.setAttribute('data-task-id', task.id);
                    // Pass the task ID v√† the button element itself to the copy function
                    copyButton.onclick = (e) => copyCode(task.id, e.target); 
                    
                    codeWrapper.appendChild(codePre);
                    codeWrapper.appendChild(copyButton);
                    li.appendChild(codeWrapper);
                }

                ul.appendChild(li);
            });

            slideElement.appendChild(ul);
        }

        // H√†m ch√≠nh ƒë·ªÉ render l·∫°i t·∫•t c·∫£ c√°c b∆∞·ªõc (t·∫°o c·∫•u tr√∫c slide)
        function renderSteps() {
            const slidesWrapper = document.getElementById('slides-wrapper');
            slidesWrapper.innerHTML = ''; // Clear existing slides

            // C·∫≠p nh·∫≠t l·∫°i stepsData v·ªõi d·ªØ li·ªáu ƒë√£ l∆∞u
            const dynamicStepsData = getDynamicStepsData();
            
            dynamicStepsData.forEach(section => {
                const sectionElement = document.createElement('div');
                // Quan tr·ªçng: Th√™m class slide-item ƒë·ªÉ ƒë·∫£m b·∫£o chi·ªÅu r·ªông 100% v√† kh√¥ng co l·∫°i
                sectionElement.className = 'slide-item p-5 md:p-6'; 
                sectionElement.id = `slide-${section.id}`;
                
                // S·ª≠ d·ª•ng h√†m updateSlideContent ƒë·ªÉ render n·ªôi dung c·ªßa t·ª´ng slide
                slidesWrapper.appendChild(sectionElement);
                // Render n·ªôi dung b√™n trong slide card
                updateSlideContent(dynamicStepsData.indexOf(section)); 
            });
            
            // Thi·∫øt l·∫≠p v·ªã tr√≠ slide ban ƒë·∫ßu v√† tr·∫°ng th√°i n√∫t
            updateSlidePosition();
            
            // Render Progress Bar
            updateProgressBar();
        }

        // H√†m l·∫•y d·ªØ li·ªáu b∆∞·ªõc h∆∞·ªõng d·∫´n ƒë√£ ƒë∆∞·ª£c c√° nh√¢n h√≥a
        function getDynamicStepsData() {
            // Clone stepsData to modify text dynamically
            const dynamicData = JSON.parse(JSON.stringify(stepsData)); 
            
            // Define dynamic variables with current project data
            const projectName = projectData.projectName || 'T√™n D·ª± √°n c·ªßa b·∫°n';
            const apiKey = projectData.firebaseApiKey || 'D√°n KEY ƒë√£ l∆∞u t·∫°i ƒë√¢y';
            const repoUrl = projectData.githubRepoUrl || 'URL Repo ƒë√£ l∆∞u';

            // 1. Update Firebase Project Name (Phase 3, Task 0)
            dynamicData[2].tasks[0].text = `T·∫°o m·ªôt d·ª± √°n m·ªõi trong Firebase Console (ƒë·∫∑t t√™n: <span class="text-indigo-600 font-semibold">${projectName}</span>).`;
            
            // 2. Update .env.local file content with current API key (Phase 3, Task 5: t14_env_local)
            if (dynamicData[2] && dynamicData[2].tasks && dynamicData[2].tasks[5]) { 
                 dynamicData[2].tasks[5].codeSnippet = 
                    `# file: .env.local
NEXT_PUBLIC_FIREBASE_API_KEY="${apiKey}"
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN="..."
# KH√îNG BAO G·ªíM T·ªÜP N√ÄY KHI COMMIT L√äN GITHUB!`;
            }

            // 3. Update Vercel Import URL (Phase 5, Task 0)
            dynamicData[4].tasks[0].text = `ƒêƒÉng nh·∫≠p Vercel v√† ch·ªçn "Add New Project", sau ƒë√≥ Import Repository t·ª´ GitHub (<a href="${repoUrl} " target="_blank" class="text-indigo-500 underline">${repoUrl}</a>).`;

            return dynamicData;
        }

        // B·∫Øt ƒë·∫ßu ·ª©ng d·ª•ng
        function initApp() {
            loadState(); // T·∫£i d·ªØ li·ªáu ƒë√£ l∆∞u
            renderSteps(); // Render c√°c b∆∞·ªõc
            updateProjectDataDisplay(); // Hi·ªÉn th·ªã d·ªØ li·ªáu d·ª± √°n ƒë√£ l∆∞u
        }

        window.onload = initApp;
    </script>

</body>
</html>
